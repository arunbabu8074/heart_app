import{$ as d,Bc as g,T as a,c as v,ia as f,ka as l,oa as b,ra as p}from"./chunk-MBPXCF6J.js";function O(o,e){let s=!e?.manualCleanup?e?.injector?.get(l)??d(l):null,c=m(e?.equal),n;e?.requireSync?n=b({kind:0},{equal:c}):n=b({kind:1,value:e?.initialValue},{equal:c});let r,u=o.subscribe({next:t=>n.set({kind:1,value:t}),error:t=>{n.set({kind:2,error:t}),r?.()},complete:()=>{r?.()}});if(e?.requireSync&&n().kind===0)throw new a(601,!1);return r=s?.onDestroy(u.unsubscribe.bind(u)),g(()=>{let t=n();switch(t.kind){case 1:return t.value;case 2:throw t.error;case 0:throw new a(601,!1)}},{equal:e?.equal})}function m(o=Object.is){return(e,i)=>e.kind===1&&i.kind===1&&o(e.value,i.value)}function E(o){o===void 0&&(o=d(f));let e=o.get(p);return i=>new v(s=>{let c=e.add(),n=!1;function r(){n||(c(),n=!0)}let u=i.subscribe({next:t=>{s.next(t),r()},complete:()=>{s.complete(),r()},error:t=>{s.error(t),r()}});return u.add(()=>{s.unsubscribe(),r()}),u})}export{O as a,E as b};
