import{Ac as I,Bb as T,Bc as b,Cb as S,Cc as R,Hb as v,Ib as y,Jb as w,Nb as L,Qb as H,Sa as z,Yb as x,Zb as k,cc as V,dc as D,ea as h,fa as d,fb as O,fc as N,lc as W,na as E,ub as M}from"./chunk-I2LWXBCZ.js";var F=["bodyEl"],B=(f,e)=>e.label;function K(f,e){if(f&1&&w(0,"div"),f&2){let t=e.$implicit;V(W("point ",t.type)),M("data-point",t.label)}}var A=class f{current=b(null);start=b(40);end=b(200);step=b(1);valueChange=I();bodyEl=R.required("bodyEl");points=E([]);#n=!1;#t=null;#e=!1;#i=0;#r=0;get mid(){return Math.ceil((this.start()+this.end())/2)}selected=this.current()??this.mid;ngOnInit(){this.#s(),this.selected=this.current()??this.mid}ngAfterViewInit(){setTimeout(()=>{this.#c()},100)}#o(e){e!==this.selected&&(this.selected=e,this.valueChange.emit(this.selected))}#s=()=>{let e=[],t=this.step(),n=this.start(),i=this.end();for(let r=n;r<=i;r+=t){let o="short-point";r%(10*t)===0?o="tall-point":r%(5*t)===0&&(o="medium-point"),e.push({label:r,type:o})}this.points.set(e)};onWheel(e){let t=e.currentTarget??null;if(!t||!(t.scrollWidth>t.clientWidth))return;e.preventDefault();let i=this.getContainerScrollLeft(e,t);t.scrollLeft+=i}onPointerDown(e){let t=e.currentTarget;t&&e.button===0&&(this.#e=!0,this.#i=e.clientX,this.#r=t.scrollLeft,t.setPointerCapture(e.pointerId),t.classList.add("dragging"))}onPointerMove(e){if(!this.#e)return;let t=e.currentTarget;if(!t)return;let n=e.clientX-this.#i;t.scrollLeft=this.#r-n}onPointerUp(e){if(!this.#e)return;let t=e.currentTarget;t&&(this.#e=!1,t.classList.remove("dragging"),this.#t!==null&&clearTimeout(this.#t),this.#t=window.setTimeout(()=>this.#a(t),120))}onPointerLeave(e){this.#e&&this.onPointerUp(e)}getContainerScrollLeft(e,t){let n=l=>e.deltaMode===1?l*16:e.deltaMode===2?l*t.clientHeight:l,i=n(e.deltaX),r=n(e.deltaY),o=Math.abs(i)>Math.abs(r)?i:r,a=.15,s=e.shiftKey?a*.5:a;return Math.sign(o)*Math.min(60,Math.abs(o))*s}#c(){let e=this.bodyEl();if(!e)return;let t=e.nativeElement;if(!t||typeof t.scrollTo!="function")return;let n=t.querySelector(".horizontal-scale");if(!n)return;let i=this.selected,r=n.querySelector(`.point[data-point="${i}"]`);if(!r)return;let o=t.clientWidth,a=r.offsetLeft,s=r.offsetWidth,c=a+s/2,l=Math.max(0,c-o/2);try{t.scrollTo({left:l,behavior:"smooth"})}catch{t.scrollLeft=l}}onScaleScroll(e){let t=e.currentTarget;t&&(this.#n||(this.#n=!0,requestAnimationFrame(()=>{this.#n=!1;let n=t.querySelector(".horizontal-scale");if(!n)return;let i=Array.from(n.querySelectorAll(".point"));if(!i.length)return;let o=t.getBoundingClientRect().left+t.clientWidth/2,a=null,s=Number.POSITIVE_INFINITY;for(let c of i){let l=c.getBoundingClientRect(),u=l.left+l.width/2,g=Math.abs(u-o),m=c.dataset.point;if(!m)continue;let p=Number(m);Number.isFinite(p)&&g<s&&(s=g,a=p)}a!=null&&a!==this.selected&&this.#o(a)}),this.#t!==null&&clearTimeout(this.#t),this.#t=window.setTimeout(()=>{this.#a(t)},150)))}#a(e){if(!e||typeof e.scrollTo!="function")return;let t=e.querySelector(".horizontal-scale");if(!t)return;let n=Array.from(t.querySelectorAll(".point"));if(!n.length)return;let r=e.getBoundingClientRect().left+e.clientWidth/2,o=null,a=Number.POSITIVE_INFINITY;for(let _ of n){let C=_.getBoundingClientRect(),q=C.left+C.width/2,P=Math.abs(q-r);P<a&&(a=P,o=_)}if(!o)return;let s=e.clientWidth,c=o.offsetLeft,l=o.offsetWidth,u=c+l/2,g=Math.max(0,u-s/2);try{e.scrollTo({left:g,behavior:"smooth"})}catch{e.scrollLeft=g}let m=o.dataset.point,p=m?Number(m):NaN;Number.isFinite(p)&&p!==this.selected&&this.#o(p)}onKeyDown(e){let t=e.key,n=!1,i=this.selected,r=this.step(),o=this.start(),a=this.end();switch(t){case"ArrowLeft":case"ArrowDown":i=Math.max(o,this.selected-r),n=!0;break;case"ArrowRight":case"ArrowUp":i=Math.min(a,this.selected+r),n=!0;break;case"Home":i=o,n=!0;break;case"End":i=a,n=!0;break}n&&(e.preventDefault(),i!==this.selected?(this.#o(i),this.#l(i,!0)):this.#l(i,!0))}#l(e,t=!0){let n=this.bodyEl();if(!n)return;let i=n.nativeElement,r=i.querySelector(".horizontal-scale");if(!r)return;let o=r.querySelector(`.point[data-point="${e}"]`);if(!o)return;let a=i.clientWidth,s=o.offsetLeft,c=o.offsetWidth,l=s+c/2,u=Math.max(0,l-a/2);try{i.scrollTo({left:u,behavior:t?"smooth":"auto"})}catch{i.scrollLeft=u}}static \u0275fac=function(t){return new(t||f)};static \u0275cmp=O({type:f,selectors:[["phad-horizontal-scale"]],viewQuery:function(t,n){t&1&&x(n.bodyEl,F,5),t&2&&k()},inputs:{current:[1,"current"],start:[1,"start"],end:[1,"end"],step:[1,"step"]},outputs:{valueChange:"valueChange"},decls:10,vars:5,consts:[["bodyEl",""],[1,"horizontal-scale"],[1,"horizontal-scale-header"],["tabindex","0","role","slider","aria-orientation","horizontal",1,"horizontal-scale-body",3,"wheel","scroll","keydown","pointerdown","pointermove","pointerup","pointerleave"],[3,"class"],[1,"bottom-line"]],template:function(t,n){if(t&1){let i=L();v(0,"div",1)(1,"div",2)(2,"span"),D(3),y()(),v(4,"div",3,0),H("wheel",function(o){return h(i),d(n.onWheel(o))})("scroll",function(o){return h(i),d(n.onScaleScroll(o))})("keydown",function(o){return h(i),d(n.onKeyDown(o))})("pointerdown",function(o){return h(i),d(n.onPointerDown(o))})("pointermove",function(o){return h(i),d(n.onPointerMove(o))})("pointerup",function(o){return h(i),d(n.onPointerUp(o))})("pointerleave",function(o){return h(i),d(n.onPointerLeave(o))}),v(6,"div",1),T(7,K,1,4,"div",4,B),w(9,"div",5),y()()()}t&2&&(z(3),N(" ",n.selected," "),z(),M("aria-valuemin",n.start())("aria-valuemax",n.end())("aria-valuenow",n.selected)("aria-label","Value"),z(3),S(n.points()))},styles:['[_nghost-%COMP%]{--horizontal-scale-primary-color: #dd1c3c;--horizontal-scale-select-color: #2c2c2c;--horizontal-scale-point-color: #a9a9a9;--horizontal-scale-bottom-line-color: #a9a9a9;--horizontal-scale-point-gap: .5rem;--horizontal-scale-gap-to-body: -1.5rem;--horizontal-scale-body-height: 2.6rem;--horizontal-scale-bottom-line-thickness: .05rem;--horizontal-scale-tip-size: .25rem;--horizontal-scale-half-tick: .1rem;--horizontal-scale-label-offset: 1.35rem}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;position:relative;z-index:20}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;color:var(--horizontal-scale-select-color);border-radius:10px;border:.882px solid var(--horizontal-scale-primary-color);box-shadow:0 1.765px 1.5px .882px #0000003d inset;display:inline-flex;align-items:center;background-color:#fffafb;background-image:linear-gradient(90deg,#dd1c3c0a,#ca4f4f0a);background-clip:padding-box;font-size:1rem;font-weight:500;padding:.125rem .5rem}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;transform:translate(-50%);top:100%;width:1px;height:calc(var(--horizontal-scale-gap-to-body) + var(--horizontal-scale-body-height) - var(--horizontal-scale-bottom-line-thickness));background:var(--horizontal-scale-primary-color);pointer-events:none;z-index:5;opacity:1;transition:opacity .2s ease}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";position:absolute;left:50%;transform:translate(-50%);top:calc(100% + var(--horizontal-scale-gap-to-body) + var(--horizontal-scale-body-height) - var(--horizontal-scale-bottom-line-thickness));width:0;height:0;border-left:var(--horizontal-scale-tip-size) solid transparent;border-right:var(--horizontal-scale-tip-size) solid transparent;border-bottom:var(--horizontal-scale-tip-size) solid var(--horizontal-scale-primary-color);z-index:6;pointer-events:none}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]{scroll-behavior:smooth;max-width:400px;width:100%;margin:var(--horizontal-scale-gap-to-body) auto 0 auto;overflow-x:auto;overflow-y:visible;position:relative;z-index:0;height:var(--horizontal-scale-body-height);touch-action:pan-x;cursor:grab;-webkit-user-select:none;user-select:none;-ms-overflow-style:none;scrollbar-width:none}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body.dragging[_ngcontent-%COMP%]{cursor:grabbing}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]   .horizontal-scale[_ngcontent-%COMP%]{display:flex;align-items:flex-end;position:relative;gap:var(--horizontal-scale-point-gap);width:max-content;height:100%;padding-left:calc(50% - var(--horizontal-scale-half-tick));padding-right:calc(50% - var(--horizontal-scale-half-tick));padding-top:calc(var(--horizontal-scale-label-offset) + .2rem)}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]   .horizontal-scale[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{width:var(--horizontal-scale-point-width);background:var(--horizontal-scale-point-color);flex-shrink:0}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]   .horizontal-scale[_ngcontent-%COMP%]   .tall-point[_ngcontent-%COMP%]{position:relative;height:1.2rem;width:.1rem}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]   .horizontal-scale[_ngcontent-%COMP%]   .tall-point[_ngcontent-%COMP%]:before{content:attr(data-point);position:absolute;top:calc(-1 * var(--horizontal-scale-label-offset));left:50%;transform:translate(-50%);font-size:.75rem;font-weight:500;color:#5c5c5c;padding:2px 4px;white-space:nowrap;z-index:2}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]   .horizontal-scale[_ngcontent-%COMP%]   .medium-point[_ngcontent-%COMP%]{height:1rem;width:.1rem}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]   .horizontal-scale[_ngcontent-%COMP%]   .short-point[_ngcontent-%COMP%]{height:.4rem;width:.1rem}.horizontal-scale[_ngcontent-%COMP%]   .horizontal-scale-body[_ngcontent-%COMP%]   .horizontal-scale[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:var(--horizontal-scale-bottom-line-thickness);background:var(--horizontal-scale-bottom-line-color);left:0}'],changeDetection:0})};export{A as a};
